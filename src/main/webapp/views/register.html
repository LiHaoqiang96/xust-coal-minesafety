<!DOCTYPE HTML>

<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>注册新用户 - 采空区卸压瓦斯抽采效果智能评价系统</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>
		
	<div class="fh5co-loader"></div>
	
	<div id="page">
	<nav class="fh5co-nav" role="navigation">
			<div class="container">
				<div class="row">
					<div class="col-xs-2 text-left">
						<!--<div id="fh5co-logo"><a href="index.html">Concept<span>.</span></a></div>-->
					</div>
					<div class="col-xs-10 text-right menu-1">
						<ul>
							<li class="active"><a href="index.html">首页</a></li>
							<li class="has-dropdown">
								<a href="javascript:">服务</a>
								<ul class="dropdown">
									<li><a href="#">others</a></li>
								</ul>
							</li>
						</ul>
					</div>
				</div>

			</div>
		</nav>

	<header id="fh5co-header" class="fh5co-cover fh5co-cover-sm" role="banner" style="height: 400px;background-image:url(images/img_bg_1.jpg);" data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
		<div class="container">
			<div class="row">
				<div class="col-md-7 text-left">
					<div class="display-t">
						<div class="display-tc animate-box" data-animate-effect="fadeInUp">
							<h1 class="mb30">注册新用户</h1>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>

	

	<div id="fh5co-contact">
		<div class="container">
			<div class="row">
				<div class="col-md-offset-3 col-md-6 animate-box">
					<form id="regisForm">
						<div class="row form-group">
							<div class="col-md-12">
								<label for="realname">姓名</label>
								<input type="text" id="realname" class="form-control" placeholder="你的姓名">
							</div>
						</div>

						<div class="row form-group">
							<div class="col-md-12">
								<label for="num">手机号</label>
								<input type="text" id="num" class="form-control" placeholder="你的手机号">
							</div>
						</div>

						<div class="row form-group">
							<div class="col-md-12">
								<label for="password">密码</label>
								<input type="password" id="password" class="form-control" placeholder="请输入密码">
							</div>
						</div>

						<div class="row form-group">
							<div class="col-md-12">
								<label for="repassword">确认密码</label>
								<input type="password" id="repassword" class="form-control" placeholder="请确认您的密码">
							</div>
						</div>

						<div class="row form-group">

							<div class="col-md-8">
								<label for="yanzheng">验证码</label>
								<input type="text" id="yanzheng" class="form-control" placeholder="请输入手机验证码">
							</div>
							<div class="col-md-2">
								<label></label>
								<input type="button" id="fasong" class="btn navbar-btn btn-info" value="发送验证码">
							</div>
						</div>

						<div class="form-group">
							<input type="button" id="submit" value="注册" class="btn btn-primary">
							<input type="reset" value="重置" class="btn btn-primary">
						</div>

					</form>		
				</div>
			</div>
			
		</div>
	</div>
	<footer id="fh5co-footer" role="contentinfo">
			<div class="container">
				<div class="row row-pb-md">
					<div class="col-md-4 fh5co-widget ">
						<h3>采空区卸压瓦斯抽采效果智能评价系统</h3>
						<p>简介说明……</p>
					</div>

					<div class="col-md-offset-4 col-md-2 col-sm-4 col-xs-6 col-md-push-1 ">
						<ul class="fh5co-footer-links">
							<li><a href="javascript:">团队介绍</a></li>
							<li><a href="javascript:">关于</a></li>
						</ul>
					</div>
				</div>

				<div class="row copyright">
					<div class="col-md-12 text-center">
						<p>
							<small class="block">&copy; 2018 xust. All Rights Reserved.</small>
						</p>
						<p>
							<ul class="fh5co-social-icons">
								<li><a href="#"><i class="icon-twitter"></i></a></li>
								<li><a href="#"><i class="icon-facebook"></i></a></li>
								<li><a href="#"><i class="icon-linkedin"></i></a></li>
								<li><a href="#"><i class="icon-dribbble"></i></a></li>
							</ul>
						</p>
					</div>
				</div>

			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- countTo -->
	<script src="js/jquery.countTo.js"></script>
	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>
	<!-- Stellar -->
	<script src="js/jquery.stellar.min.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>
	<script src="js/index.js"></script>
	<script>
        //判断用户名
        $("#realname").blur(function(){
            if($(this).val()==""){
                $(this).css("border-color","orangered");
            }else{
                $(this).css("border-color","#0095ff");
            }
        })
        //判断手机号  11位数字，1开头
        $("#num").blur(function(){
            var re = /^1\d{10}$/;
            var str = $("#num").val();
            if(re.test(str)){//正确
                $(this).css("border-color","#0095ff");
            }else{//错误
                $(this).css("border-color","orangered");
            }
        })

        //判断密码 最少6位，包括至少一个大写字母，1个小写字母，1个数字，1个特殊字符
        $("#password").blur(function(){//wW&1234
            //var pPattern = /^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/;
            //var str = $("#password").val();
            if($(this).val()!=""){//正确
                $(this).css("border-color","#0095FF");
            }else{//错误
                $(this).css("border-color","orangered");
            }
        })

        //密码确认
        $("#repassword").blur(function(){
            if($("#password").val()==$("#repassword").val()){
                $(this).css("border-color","#0095ff");
            }else{
                $(this).css("border-color","orangered");
            }
        })

        //发送验证码
        $("#fasong").click(function(){
            $.ajax({
                type:"get",
                url:serverUrl+"application/message?model=0&phonenum="+$("#num").val(),
                success:function(data){
                    $("#yanzheng").blur(function(){
                        if($("#yanzheng").val()==data){
                            $(this).css("border-color","#0095ff");
                        }else{
                            $(this).css("border-color","orangered");
                        }
                    })
                }
            })
            var countdown=60;
            function sendemail(){
                var obj = $("#fasong");
                settime(obj);

            }
            function settime(obj) { //发送验证码倒计时
                if (countdown == 0) {
                    obj.attr('disabled',false);
                    //obj.removeattr("disabled");
                    obj.val("免费获取验证码");
                    countdown = 60;
                    return;
                } else {
                    obj.attr('disabled',true);
                    obj.val("重新发送(" + countdown + ")");
                    countdown--;
                }
                setTimeout(function() {
                    settime(obj) ;
                },1000)
            }
            sendemail();
        })

        //点击提交
        $("#submit").click(function(){
            $.ajax({
                type:"get",
                url:serverUrl+"application/checkinsert?realname="+$("#realname").val()+"&phonenum="+$("#num").val()+"&password="+$("#password").val()+"&code="+$("#yanzheng").val(),
                success:function(data){
                    if(data.phone=="1"){
                        alert("您已注册过，请登录！");
                        window.location.href = "manager.html";
                    }else if(data.phone=="0"&&data.flag=="1"){
                        window.location.href = "manager.html";
                    }else if(data.flag=="0"){
                        alert("验证码有误！");
                    }
                }
            });
        })
	</script>
	</body>
</html>

